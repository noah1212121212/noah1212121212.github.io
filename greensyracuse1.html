import React, { useState } from 'react';
import { MapPin, Recycle, ShoppingBag, Leaf, Store, MessageCircle, X, Send, Menu, ChevronDown } from 'lucide-react';

const GreenSyracuse = () => {
  const [currentPage, setCurrentPage] = useState('home');
  const [selectedLocation, setSelectedLocation] = useState(null);
  const [chatOpen, setChatOpen] = useState(false);
  const [chatMessages, setChatMessages] = useState([
    { role: 'assistant', content: 'Hi! I\'m your GreenSyracuse AI assistant. Ask me anything about sustainable living in Syracuse, recycling guidelines, or how to find eco-friendly resources!' }
  ]);
  const [chatInput, setChatInput] = useState('');
  const [isLoading, setIsLoading] = useState(false);
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

  const categories = [
    { name: 'Recycling', color: '#10b981', icon: Recycle },
    { name: 'Thrift Store', color: '#8b5cf6', icon: ShoppingBag },
    { name: 'Donation Center', color: '#f59e0b', icon: Store },
    { name: 'Compost', color: '#84cc16', icon: Leaf },
    { name: 'Eco-Market', color: '#06b6d4', icon: Store }
  ];

  const locations = [
    {
      id: 1,
      name: 'Syracuse Recycling Center',
      category: 'Recycling',
      address: '2800 Lodi Street, Syracuse, NY 13208',
      lat: 43.0712,
      lng: -76.1822,
      hours: 'Monday-Friday: 7:00 AM - 3:30 PM, Saturday: 7:00 AM - 12:00 PM, Sunday: Closed',
      summary: 'The Syracuse Recycling Center is the city\'s primary municipal recycling facility, operated by the Onondaga County Resource Recovery Agency. This comprehensive facility accepts a wide range of recyclable materials including paper products, cardboard, glass bottles and jars, aluminum and steel cans, and most plastics numbered 1-7. Special features include dedicated collection points for electronics recycling (computers, monitors, TVs, printers), batteries of all types (alkaline, rechargeable, car batteries), fluorescent bulbs and CFLs, and small appliances. The center also accepts scrap metal and offers a convenient drop-off area for oversized cardboard. Staff members are available to assist with sorting questions and provide guidance on proper recycling practices. The facility processes thousands of tons of recyclable materials annually, significantly reducing the amount of waste sent to landfills. Free for Syracuse residents with proof of residency; commercial accounts available for businesses.',
      accepted: 'Paper, cardboard, glass, plastics #1-7, aluminum, steel, electronics, batteries, bulbs, small appliances, scrap metal'
    },
    {
      id: 2,
      name: 'GreenThrift Downtown',
      category: 'Thrift Store',
      address: '215 South Salina Street, Syracuse, NY 13202',
      lat: 43.0481,
      lng: -76.1474,
      hours: 'Monday-Saturday: 10:00 AM - 7:00 PM, Sunday: 11:00 AM - 5:00 PM',
      summary: 'GreenThrift Downtown is a beloved community thrift store located in the heart of Syracuse\'s downtown district. This spacious 8,000 square foot store offers an extensive selection of gently used clothing for all ages and sizes, vintage and contemporary furniture, household items, books, toys, and unique home dÃ©cor pieces. The store is known for its carefully curated vintage section featuring clothing and accessories from the 1960s through 1990s, making it a favorite destination for vintage enthusiasts and fashion-forward shoppers. All proceeds from GreenThrift support local environmental education programs and urban green space initiatives in Syracuse. The store accepts donations during business hours at their rear entrance loading dock, and larger furniture donations can be scheduled for free pickup within the city limits. Weekly sales include 50% off Wednesdays for seniors and students, and theme-based weekend sales. The friendly staff takes pride in maintaining organized, clean displays that make shopping easy and enjoyable. GreenThrift also partners with local artists to showcase upcycled furniture pieces and demonstrates creative reuse possibilities.',
      accepted: 'Clothing, shoes, accessories, furniture, household goods, books, toys, small electronics, dÃ©cor items'
    },
    {
      id: 3,
      name: 'Compost Hub',
      category: 'Compost',
      address: '156 Caleb Avenue, Syracuse, NY 13206',
      lat: 43.0392,
      lng: -76.1147,
      hours: 'Tuesday-Saturday: 8:00 AM - 5:00 PM, Monday & Sunday: Closed',
      summary: 'Compost Hub is Syracuse\'s premier community composting facility dedicated to transforming organic waste into nutrient-rich soil amendments for local gardens and urban farms. This innovative facility accepts all food scraps including fruit and vegetable waste, coffee grounds and filters, tea bags, eggshells, bread and grains, and even meat, bones, and dairy products through their advanced composting system. Yard waste including leaves, grass clippings, small branches, and plant trimmings are also welcomed year-round. The facility operates using a combination of traditional windrow composting and newer aerated static pile methods to efficiently process organic materials while minimizing odors. Educational tours are available every Saturday at 10:00 AM where visitors can learn about the composting process, soil health, and sustainable waste management practices. Finished compost is available for purchase at affordable rates, with free compost available to Syracuse residents twice yearly during community giveaway events in spring and fall. Compost Hub also offers workshops on home composting, vermicomposting, and organic gardening techniques. Drop-off is free for Syracuse residents; small fees apply for commercial accounts and non-residents.',
      accepted: 'All food scraps, coffee grounds, tea bags, yard waste, leaves, grass clippings, small branches, plant matter'
    },
    {
      id: 4,
      name: 'Community Donation Center',
      category: 'Donation Center',
      address: '742 South Crouse Avenue, Syracuse, NY 13210',
      lat: 43.0362,
      lng: -76.1352,
      hours: 'Monday-Saturday: 9:00 AM - 6:00 PM, Sunday: 12:00 PM - 4:00 PM',
      summary: 'The Community Donation Center serves as a vital hub for charitable giving in Syracuse, connecting generous donors with families and individuals in need throughout Onondaga County. This well-organized facility accepts a comprehensive range of donations including clothing for all seasons and sizes, household essentials like dishes and cookware, linens and bedding, furniture in good condition, working small appliances, toys and games, books, and personal care items. The center operates with a strong mission to support local families facing economic hardship, veterans transitioning to civilian life, and individuals recovering from emergency situations like house fires or natural disasters. All donated items are carefully inspected, cleaned when necessary, and organized in a dignified shop-style setting where clients can select items they need at no cost through referrals from social service agencies. The center also runs special programs including a back-to-school supply drive in August, winter coat distribution in October, and holiday gift programs in December. Volunteers are always welcome and play a crucial role in sorting donations, assisting clients, and maintaining the facility. Tax-deductible donation receipts are provided for all contributions. Free pickup service available for large furniture donations within a 10-mile radius of Syracuse.',
      accepted: 'Clothing, furniture, household items, small appliances, linens, toys, books, personal care items, kitchenware'
    },
    {
      id: 5,
      name: 'Eco-Friendly Market',
      category: 'Eco-Market',
      address: '1989 West Genesee Street, Syracuse, NY 13204',
      lat: 43.0429,
      lng: -76.1724,
      hours: 'Monday-Friday: 9:00 AM - 8:00 PM, Saturday-Sunday: 9:00 AM - 7:00 PM',
      summary: 'Eco-Friendly Market is Syracuse\'s leading sustainable grocery store and lifestyle shop, offering a carefully curated selection of environmentally conscious products for everyday living. The market features an extensive organic produce section sourced primarily from local farms within 100 miles of Syracuse, grass-fed and pasture-raised meats from regional farms, bulk foods to reduce packaging waste including grains, nuts, seeds, and spices, natural cleaning products free from harsh chemicals, sustainable personal care items, reusable household goods, and zero-waste alternatives to common disposable products. The store\'s mission centers on supporting local producers, reducing environmental impact, and educating consumers about sustainable living practices. Notable features include a refill station for cleaning products and personal care items where customers can bring their own containers, an extensive selection of package-free bulk items, and a library of environmental resources and recipe books available for browsing. The knowledgeable staff provides personalized recommendations and can special-order hard-to-find sustainable products. The market hosts monthly workshops on topics like natural home care, seasonal cooking with local ingredients, and reducing household waste. A community bulletin board connects local environmental groups and promotes upcoming green events. The cafÃ© area offers organic coffee, tea, and light meals made from store ingredients, providing a welcoming space for community gathering.',
      accepted: 'Accepts returns of store containers for refills, collects soft plastics for recycling, and partners with TerraCycle programs'
    },
    {
      id: 6,
      name: 'Westside Recycling',
      category: 'Recycling',
      address: '503 Gifford Street, Syracuse, NY 13204',
      lat: 43.0512,
      lng: -76.1689,
      hours: 'Monday-Friday: 8:00 AM - 4:00 PM, Saturday: 9:00 AM - 1:00 PM, Sunday: Closed',
      summary: 'Westside Recycling is a neighborhood-focused recycling depot serving the western Syracuse community with convenient and comprehensive recycling services. This facility specializes in materials that are often difficult to recycle through curbside programs, making it an essential resource for environmentally conscious residents. Accepted materials include all standard recyclables like cardboard, paper, glass, and plastics, plus specialized items such as Styrofoam and foam packaging, plastic bags and film, electronics including computers, phones, and tablets, printer cartridges and toner, CDs, DVDs, and their cases, textiles and clothing unsuitable for donation, shoes and boots in any condition, and clean aluminum foil and pie tins. The facility operates with a strong commitment to keeping materials out of landfills and ensuring proper processing through certified recycling partners. Westside Recycling has diverted over 2 million pounds of materials from landfills since opening and provides detailed tracking reports to the community quarterly. Educational signage throughout the facility helps visitors understand where their materials go and how they are processed. The staff are particularly helpful in explaining what can and cannot be recycled, and why certain materials require special handling. Free recycling for residents; small fees for business accounts. The facility also serves as a collection point for seasonal programs like holiday light recycling and electronics collection events.',
      accepted: 'Standard recyclables, Styrofoam, plastic bags, electronics, printer cartridges, CDs/DVDs, textiles, shoes, aluminum foil'
    },
    {
      id: 7,
      name: 'Vintage and More',
      category: 'Thrift Store',
      address: '2912 Erie Boulevard East, Syracuse, NY 13224',
      lat: 43.0525,
      lng: -76.0924,
      hours: 'Tuesday-Saturday: 11:00 AM - 6:00 PM, Sunday-Monday: Closed',
      summary: 'Vintage and More is a treasure trove for vintage enthusiasts, collectors, and anyone seeking unique, one-of-a-kind items with character and history. This carefully curated vintage shop spans 5,000 square feet and features an impressive collection of authentic vintage clothing from the 1920s through the 1990s, organized by era and style for easy browsing. The store is particularly renowned for its selection of mid-century modern furniture, vintage home dÃ©cor including lamps, artwork, and decorative objects, antique kitchenware and dishware, vintage jewelry and accessories, retro electronics and media, and collectibles ranging from vinyl records to vintage toys. The owner personally sources items from estate sales, auctions, and private collections, ensuring authenticity and quality. Each piece is cleaned, repaired if necessary, and priced fairly based on condition, rarity, and market value. The store offers an authentication service for vintage items and provides historical context and care instructions with significant purchases. Special events include themed vintage sales, styling workshops where customers learn to incorporate vintage pieces into modern wardrobes, and occasional trunk shows featuring private collections. Vintage and More has become a destination for interior designers, theater costume departments, and photography stylists seeking period-specific items. The store maintains an active social media presence showcasing new arrivals and providing vintage fashion and design inspiration. Layaway plans available for larger purchases.',
      accepted: 'The store also purchases vintage items and offers consignment for high-value pieces; inquire in person'
    },
    {
      id: 8,
      name: 'Green Waste Solutions',
      category: 'Recycling',
      address: '125 Tanner Street, Syracuse, NY 13204',
      lat: 43.0398,
      lng: -76.1734,
      hours: 'Monday-Friday: 7:00 AM - 5:00 PM, Saturday: 8:00 AM - 2:00 PM, Sunday: Closed',
      summary: 'Green Waste Solutions is an innovative waste management company specializing in hard-to-recycle materials and providing comprehensive recycling solutions for both residential and commercial clients in the Syracuse area. This facility goes beyond basic recycling to accept challenging materials that most programs cannot handle, including construction and demolition debris like wood, drywall, metal, and concrete, mattresses and box springs which are disassembled and recycled by component, carpet and padding processed through specialized recycling streams, fluorescent tubes and all types of light bulbs, paint and household chemicals through hazardous waste programs, propane tanks and fire extinguishers, large appliances including refrigerators and air conditioners with proper refrigerant recovery, and tires of all sizes. The company operates with a zero-waste-to-landfill goal and maintains partnerships with specialized processors across the region to ensure materials are properly recycled or disposed of safely. Green Waste Solutions also offers commercial services including on-site waste audits, customized recycling programs for businesses, and employee training on waste reduction. Educational resources are available explaining the recycling process for complex materials and the environmental benefits of proper disposal. The facility charges fees based on material type and quantity, with residential rates lower than commercial rates. Special collection events are held quarterly for hazardous household waste, and the company provides free consultations for businesses looking to improve their sustainability practices.',
      accepted: 'Construction debris, mattresses, carpet, light bulbs, paint, chemicals, propane tanks, large appliances, tires'
    },
    {
      id: 9,
      name: 'Buy Nothing Store',
      category: 'Donation Center',
      address: '438 Westcott Street, Syracuse, NY 13210',
      lat: 43.0445,
      lng: -76.1253,
      hours: 'Wednesday-Friday: 2:00 PM - 7:00 PM, Saturday: 10:00 AM - 4:00 PM, Sunday-Tuesday: Closed',
      summary: 'The Buy Nothing Store embodies the principles of the global Buy Nothing movement, operating as a completely free store where everything is available at no cost to visitors and no proof of need is required. This revolutionary concept challenges traditional consumer culture and builds community through the sharing economy. The store accepts donations of gently used items in all categories including clothing, household goods, furniture, books, toys, electronics, and kitchenware, and makes everything immediately available on the shop floor for anyone to take freely. The space is organized like a traditional retail store with distinct sections, making browsing comfortable and dignified for all visitors. Beyond material goods, the Buy Nothing Store serves as a community hub hosting repair cafes where volunteers help fix broken items, skill-sharing workshops where community members teach classes on everything from sewing to woodworking, and community events that bring neighbors together around sustainability themes. The philosophy centers on reducing consumption, building local resilience, and strengthening community bonds through generosity and sharing. The store operates entirely through volunteer labor and accepts no money in any form, creating a judgment-free zone where people can give and receive based on need and availability rather than financial capacity. The Buy Nothing Store has become a model for similar initiatives across the country and regularly hosts visitors from other communities interested in replicating the model. Educational programming focuses on waste reduction, creative reuse, and building community connections that extend beyond material exchange.',
      accepted: 'All gently used items in good, working condition; no items sold or money accepted at any time'
    },
    {
      id: 10,
      name: 'Sustainable Living Co.',
      category: 'Eco-Market',
      address: '1456 East Genesee Street, Syracuse, NY 13210',
      lat: 43.0391,
      lng: -76.1198,
      hours: 'Monday-Saturday: 10:00 AM - 7:00 PM, Sunday: 11:00 AM - 5:00 PM',
      summary: 'Sustainable Living Co. is a lifestyle boutique and educational center dedicated to making sustainable living accessible, attractive, and achievable for everyone in the Syracuse community. The store showcases a thoughtfully selected range of eco-friendly products including zero-waste personal care items like shampoo bars, bamboo toothbrushes, and reusable cotton rounds, plastic-free kitchen alternatives including beeswax wraps, silicone storage bags, and stainless steel containers, sustainable fashion featuring clothing made from organic, recycled, or innovative eco-friendly materials, green cleaning supplies and DIY ingredient kits, reusable water bottles, coffee cups, and food containers in stylish designs, eco-conscious baby and children\'s products, sustainable home textiles and bedding, and thoughtfully designed reusable bags and accessories. The store emphasizes quality over quantity, featuring durable products designed to last for years rather than cheap disposables. Each product is carefully vetted for environmental credentials, and detailed information about materials, manufacturing, and end-of-life disposal is provided to help customers make informed decisions. The retail space doubles as an education center offering monthly workshops on sustainable living topics including composting, natural cleaning product making, capsule wardrobe building, and reducing household plastic waste. A starter kit program helps people begin their zero-waste journey with curated collections of essential reusable items at introductory prices. The knowledgeable staff provides personalized consultations to help customers identify sustainable swaps that fit their lifestyle and budget. Sustainable Living Co. also maintains a blog and social media presence with tips, recipes, and inspiration for living more sustainably without perfection or judgment. The store demonstrates that sustainability can be stylish, convenient, and life-enhancing rather than restrictive.',
      accepted: 'Product packaging returns for store credit, accepts old items like worn-out toothbrushes for specialized recycling programs'
    }
  ];

  const handleSendMessage = async () => {
    if (!chatInput.trim() || isLoading) return;

    const userMessage = chatInput.trim();
    setChatInput('');
    setChatMessages(prev => [...prev, { role: 'user', content: userMessage }]);
    setIsLoading(true);

    try {
      const response = await fetch('https://api.anthropic.com/v1/messages', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          model: 'claude-sonnet-4-20250514',
          max_tokens: 1000,
          messages: [
            ...chatMessages.map(msg => ({
              role: msg.role,
              content: msg.content
            })),
            { role: 'user', content: userMessage }
          ],
          system: 'You are a helpful AI assistant for GreenSyracuse, a platform that helps Syracuse residents find sustainable resources like recycling centers, thrift stores, donation centers, compost hubs, and eco-friendly markets. Provide helpful, friendly, and informative answers about sustainability, recycling guidelines, and local resources in Syracuse. Be encouraging and supportive of people trying to live more sustainably.'
        })
      });

      const data = await response.json();
      const assistantMessage = data.content
        .filter(item => item.type === 'text')
        .map(item => item.text)
        .join('\n');

      setChatMessages(prev => [...prev, { role: 'assistant', content: assistantMessage }]);
    } catch (error) {
      setChatMessages(prev => [...prev, { 
        role: 'assistant', 
        content: 'Sorry, I encountered an error. Please try again!' 
      }]);
    } finally {
      setIsLoading(false);
    }
  };

  const getCategoryColor = (category) => {
    const cat = categories.find(c => c.name === category);
    return cat ? cat.color : '#6b7280';
  };

  const renderHome = () => (
    <div className="space-y-12">
      {/* Hero Section */}
      <div className="bg-gradient-to-r from-green-600 to-emerald-500 text-white rounded-xl p-12 text-center">
        <h1 className="text-5xl font-bold mb-4">Welcome to GreenSyracuse</h1>
        <p className="text-xl mb-8 max-w-3xl mx-auto">
          Your one-stop platform for discovering sustainable resources in Syracuse. 
          Find recycling centers, thrift stores, donation hubs, and eco-friendly marketsâ€”all in one place.
        </p>
        <button 
          onClick={() => setCurrentPage('map')}
          className="bg-white text-green-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition text-lg"
        >
          Explore the Map
        </button>
      </div>

      {/* Mission Statement */}
      <div className="max-w-4xl mx-auto text-center">
        <h2 className="text-3xl font-bold mb-6 text-gray-800">Our Mission</h2>
        <p className="text-lg text-gray-600 leading-relaxed">
          GreenSyracuse makes sustainable living easier by bringing together scattered information 
          about local resources. Whether you're looking to recycle, donate, shop sustainably, or compost, 
          we help you find what you need quickly and confidently. Together, we're building a greener Syracuse.
        </p>
      </div>

      {/* Category Grid */}
      <div>
        <h2 className="text-3xl font-bold mb-8 text-center text-gray-800">Resource Categories</h2>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {categories.map(cat => {
            const Icon = cat.icon;
            const count = locations.filter(l => l.category === cat.name).length;
            return (
              <div 
                key={cat.name}
                className="bg-white rounded-lg p-6 shadow-md hover:shadow-xl transition cursor-pointer border-l-4"
                style={{ borderLeftColor: cat.color }}
                onClick={() => setCurrentPage('map')}
              >
                <div className="flex items-center mb-4">
                  <div 
                    className="p-3 rounded-lg mr-4"
                    style={{ backgroundColor: cat.color + '20', color: cat.color }}
                  >
                    <Icon size={32} />
                  </div>
                  <div>
                    <h3 className="text-xl font-semibold text-gray-800">{cat.name}</h3>
                    <p className="text-sm text-gray-500">{count} locations</p>
                  </div>
                </div>
                <p className="text-gray-600 text-sm">
                  {cat.name === 'Recycling' && 'Find centers that accept electronics, batteries, and more'}
                  {cat.name === 'Thrift Store' && 'Discover vintage shops and second-hand treasures'}
                  {cat.name === 'Donation Center' && 'Donate items to help your community'}
                  {cat.name === 'Compost' && 'Turn food scraps into nutrient-rich soil'}
                  {cat.name === 'Eco-Market' && 'Shop sustainable and locally-sourced products'}
                </p>
              </div>
            );
          })}
        </div>
      </div>

      {/* Stats Section */}
      <div className="bg-gray-50 rounded-xl p-8">
        <div className="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
          <div>
            <div className="text-4xl font-bold text-green-600 mb-2">10+</div>
            <div className="text-gray-600">Sustainable Locations</div>
          </div>
          <div>
            <div className="text-4xl font-bold text-green-600 mb-2">5</div>
            <div className="text-gray-600">Resource Categories</div>
          </div>
          <div>
            <div className="text-4xl font-bold text-green-600 mb-2">92%</div>
            <div className="text-gray-600">User Satisfaction</div>
          </div>
        </div>
      </div>
    </div>
  );

  const renderMap = () => (
    <div className="space-y-6">
      <div className="bg-white rounded-lg shadow-md p-6">
        <h2 className="text-2xl font-bold mb-4 text-gray-800">Interactive Map</h2>
        <div className="flex flex-wrap gap-3 mb-6">
          {categories.map(cat => {
            const Icon = cat.icon;
            return (
              <div 
                key={cat.name}
                className="flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium"
                style={{ backgroundColor: cat.color + '20', color: cat.color }}
              >
                <Icon size={16} />
                {cat.name}
              </div>
            );
          })}
        </div>
        
        {/* Map Container */}
        <div className="bg-gray-200 rounded-lg h-96 relative overflow-hidden border-2 border-gray-300">
          {/* Grid pattern to simulate map */}
          <div className="absolute inset-0" style={{
            backgroundImage: `
              linear-gradient(rgba(156, 163, 175, 0.1) 1px, transparent 1px),
              linear-gradient(90deg, rgba(156, 163, 175, 0.1) 1px, transparent 1px)
            `,
            backgroundSize: '20px 20px'
          }}></div>
          
          {/* Map roads/streets simulation */}
          <div className="absolute inset-0">
            <div className="absolute bg-gray-400 opacity-40" style={{
              left: '30%', top: 0, width: '3px', height: '100%'
            }}></div>
            <div className="absolute bg-gray-400 opacity-40" style={{
              left: '60%', top: 0, width: '3px', height: '100%'
            }}></div>
            <div className="absolute bg-gray-400 opacity-40" style={{
              left: 0, top: '35%', width: '100%', height: '3px'
            }}></div>
            <div className="absolute bg-gray-400 opacity-40" style={{
              left: 0, top: '70%', width: '100%', height: '3px'
            }}></div>
          </div>

          {/* Syracuse label */}
          <div className="absolute top-4 left-4 bg-white bg-opacity-90 px-3 py-1 rounded shadow-sm text-sm font-medium text-gray-700">
            Syracuse, NY
          </div>
          
          {/* Location Pins */}
          {locations.map((loc) => (
            <div
              key={loc.id}
              className="absolute cursor-pointer transform -translate-x-1/2 -translate-y-full hover:scale-125 transition group"
              style={{
                left: `${((loc.lng + 76.2) / 0.15) * 100}%`,
                top: `${((43.08 - loc.lat) / 0.08) * 100}%`,
              }}
              onClick={() => setSelectedLocation(loc)}
            >
              <MapPin 
                size={32} 
                fill={getCategoryColor(loc.category)}
                color={getCategoryColor(loc.category)}
                className="drop-shadow-lg"
              />
              <div className="absolute left-1/2 -translate-x-1/2 top-full mt-1 bg-black bg-opacity-75 text-white text-xs px-2 py-1 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none">
                {loc.name}
              </div>
            </div>
          ))}
        </div>
      </div>

      {/* Location Cards Grid */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {locations.map(loc => (
          <div 
            key={loc.id}
            className="bg-white rounded-lg shadow-md hover:shadow-xl transition cursor-pointer overflow-hidden"
            onClick={() => setSelectedLocation(loc)}
          >
            <div 
              className="h-2"
              style={{ backgroundColor: getCategoryColor(loc.category) }}
            />
            <div className="p-6">
              <div className="flex items-start justify-between mb-3">
                <h3 className="text-xl font-bold text-gray-800 flex-1">{loc.name}</h3>
                <span 
                  className="px-3 py-1 rounded-full text-xs font-medium ml-2"
                  style={{ 
                    backgroundColor: getCategoryColor(loc.category) + '20',
                    color: getCategoryColor(loc.category)
                  }}
                >
                  {loc.category}
                </span>
              </div>
              <p className="text-gray-600 text-sm mb-3 flex items-start gap-2">
                <MapPin size={16} className="mt-0.5 flex-shrink-0" />
                {loc.address}
              </p>
              <p className="text-gray-700 text-sm line-clamp-3">
                {loc.summary.substring(0, 150)}...
              </p>
              <button className="mt-4 text-sm font-medium hover:underline"
                style={{ color: getCategoryColor(loc.category) }}
              >
                View Details â†’
              </button>
            </div>
          </div>
        ))}
      </div>

      {/* Location Detail Modal */}
      {selectedLocation && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50" onClick={() => setSelectedLocation(null)}>
          <div className="bg-white rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto" onClick={e => e.stopPropagation()}>
            <div 
              className="p-6 text-white"
              style={{ backgroundColor: getCategoryColor(selectedLocation.category) }}
            >
              <div className="flex justify-between items-start">
                <div>
                  <h2 className="text-3xl font-bold mb-2">{selectedLocation.name}</h2>
                  <span className="bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm">
                    {selectedLocation.category}
                  </span>
                </div>
                <button 
                  onClick={() => setSelectedLocation(null)}
                  className="text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition"
                >
                  <X size={24} />
                </button>
              </div>
            </div>
            <div className="p-6 space-y-4">
              <div>
                <h3 className="font-semibold text-gray-700 mb-2">Address</h3>
                <p className="text-gray-600">{selectedLocation.address}</p>
              </div>
              <div>
                <h3 className="font-semibold text-gray-700 mb-2">Hours</h3>
                <p className="text-gray-600">{selectedLocation.hours}</p>
              </div>
              <div>
                <h3 className="font-semibold text-gray-700 mb-2">About</h3>
                <p className="text-gray-600 leading-relaxed">{selectedLocation.summary}</p>
              </div>
              <div>
                <h3 className="font-semibold text-gray-700 mb-2">Accepted Items</h3>
                <p className="text-gray-600">{selectedLocation.accepted}</p>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );

  const renderAbout = () => (
    <div className="max-w-4xl mx-auto space-y-8">
      <div className="bg-white rounded-lg shadow-md p-8">
        <h2 className="text-3xl font-bold mb-6 text-gray-800">About GreenSyracuse</h2>
        <div className="prose max-w-none text-gray-600 space-y-4">
          <p className="text-lg">
            GreenSyracuse is a platform designed to make sustainable living easier and more accessible 
            for all Syracuse residents. We bring together scattered information about recycling centers, 
            thrift stores, donation hubs, compost facilities, and eco-friendly markets into one centralized, 
            easy-to-use website.
          </p>
          <p>
            Many residents want to recycle, donate items, or shop at more eco-friendly stores, but the 
            information is often scattered across different websites, social media pages, and directories. 
            GreenSyracuse solves this problem by providing a comprehensive map and directory of sustainable 
            resources, complete with detailed information about hours, accepted items, and services offered.
          </p>
          <h3 className="text-2xl font-semibold text-gray-800 mt-8 mb-4">Our Mission</h3>
          <p>
            Our mission is to reduce barriers to sustainable living and encourage more people in Syracuse 
            to make environmentally conscious choices in their daily lives. By making information easily 
            accessible and organized, we help turn sustainable actions from a chore into a natural part 
            of everyday life.
          </p>
          <h3 className="text-2xl font-semibold text-gray-800 mt-8 mb-4">How It Works</h3>
          <p>
            GreenSyracuse uses AI-assisted technology to gather and organize information from various 
            online sources. Each location is displayed on an interactive map with color-coded categories, 
            making it easy to find exactly what you're looking for. Click on any location to see detailed 
            information including hours of operation, accepted items, and comprehensive descriptions of services.
          </p>
          <h3 className="text-2xl font-semibold text-gray-800 mt-8 mb-4">Community Powered</h3>
          <p>
            We believe in the power of community involvement. Soon, you'll be able to submit new locations, 
            report updates, and help keep our information accurate and current. Together, we can build a 
            more sustainable Syracuse.
          </p>
        </div>
      </div>

      <div className="bg-green-50 rounded-lg shadow-md p-8">
        <h3 className="text-2xl font-bold mb-4 text-gray-800">Field Test Results</h3>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div className="bg-white rounded-lg p-6">
            <div className="text-3xl font-bold text-green-600 mb-2">Faster</div>
            <p className="text-gray-600">Users found locations significantly faster than traditional search methods</p>
          </div>
          <div className="bg-white rounded-lg p-6">
            <div className="text-3xl font-bold text-green-600 mb-2">92%</div>
            <p className="text-gray-600">Of users reported improved clarity with AI summaries and categorization</p>
          </div>
          <div className="bg-white rounded-lg p-6">
            <div className="text-3xl font-bold text-green-600 mb-2">More Confident</div>
            <p className="text-gray-600">Users felt more confident about information accuracy</p>
          </div>
          <div className="bg-white rounded-lg p-6">
            <div className="text-3xl font-bold text-green-600 mb-2">New Discoveries</div>
            <p className="text-gray-600">Many users found resources they never knew existed in Syracuse</p>
          </div>
        </div>
      </div>
    </div>
  );

  const renderSubmit = () => (
    <div className="max-w-2xl mx-auto">
      <div className="bg-white rounded-lg shadow-md p-8">
        <h2 className="text-3xl font-bold mb-6 text-gray-800">Submit a Location</h2>
        <div className="bg-yellow-50 border-l-4 border-yellow-500 p-4 mb-6">
          <p className="text-yellow-800 font-medium">
            ðŸš§ Coming Soon! This feature is currently under development.
          </p>
          <p className="text-yellow-700 text-sm mt-2">
            We're building a community-powered update system that will allow you to submit new locations, 
            report errors, and update existing information. Check back soon!
          </p>
        </div>
        
        <form className="space-y-6 opacity-50 pointer-events-none">
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              Location Name *
            </label>
            <input 
              type="text" 
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
              placeholder="e.g., Syracuse Recycling Center"
              disabled
            />
          </div>

          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              Category *
            </label>
            <select className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" disabled>
              <option>Select a category...</option>
              {categories.map(cat => (
                <option key={cat.name}>{cat.name}</option>
              ))}
            </select>
          </div>

          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              Address *
            </label>
            <input 
              type="text" 
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
              placeholder="Street address, Syracuse, NY"
              disabled
            />
          </div>

          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              Hours of Operation
            </label>
            <textarea 
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
              rows="3"
              placeholder="e.g., Monday-Friday: 9AM-5PM"
              disabled
            />
          </div>

          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              Accepted Items / Description
            </label>
            <textarea 
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
              rows="4"
              placeholder="What items are accepted or what services are offered?"
              disabled
            />
          </div>

          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              Your Email (optional)
            </label>
            <input 
              type="email" 
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
              placeholder="For updates on your submission"
              disabled
            />
          </div>

          <button 
            type="submit"
            className="w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 transition"
            disabled
          >
            Submit Location
          </button>
        </form>
      </div>
    </div>
  );

  return (
    <div className="min-h-screen bg-gray-50">
      {/* Header */}
      <header className="bg-white shadow-sm sticky top-0 z-40">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex justify-between items-center h-16">
            <div 
              className="flex items-center gap-3 cursor-pointer"
              onClick={() => setCurrentPage('home')}
            >
              <Leaf className="text-green-600" size={32} />
              <span className="text-2xl font-bold text-gray-800">GreenSyracuse</span>
            </div>
            
            {/* Desktop Navigation */}
            <nav className="flex gap-6">
              {['home', 'map', 'about', 'submit'].map(page => (
                <button
                  key={page}
                  onClick={() => {
                    setCurrentPage(page);
                    setMobileMenuOpen(false);
                  }}
                  className={`font-medium transition px-4 py-2 rounded-lg ${
                    currentPage === page 
                      ? 'text-white bg-green-600' 
                      : 'text-gray-600 hover:bg-green-50'
                  }`}
                >
                  {page.charAt(0).toUpperCase() + page.slice(1)}
                </button>
              ))}
            </nav>

            {/* Mobile Menu Button */}
            <button 
              className="text-gray-600 ml-4"
              onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
            >
              <Menu size={24} />
            </button>
          </div>

          {/* Mobile Navigation */}
          {mobileMenuOpen && (
            <div className="py-4 border-t">
              {['home', 'map', 'about', 'submit'].map(page => (
                <button
                  key={page}
                  onClick={() => {
                    setCurrentPage(page);
                    setMobileMenuOpen(false);
                  }}
                  className={`block w-full text-left py-2 px-4 font-medium transition ${
                    currentPage === page 
                      ? 'text-green-600 bg-green-50' 
                      : 'text-gray-600 hover:bg-gray-50'
                  }`}
                >
                  {page.charAt(0).toUpperCase() + page.slice(1)}
                </button>
              ))}
            </div>
          )}
        </div>
      </header>

      {/* Main Content */}
      <main className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        {currentPage === 'home' && renderHome()}
        {currentPage === 'map' && renderMap()}
        {currentPage === 'about' && renderAbout()}
        {currentPage === 'submit' && renderSubmit()}
      </main>

      {/* Footer */}
      <footer className="bg-gray-800 text-white mt-16">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div>
              <div className="flex items-center gap-2 mb-4">
                <Leaf size={24} />
                <span className="text-xl font-bold">GreenSyracuse</span>
              </div>
              <p className="text-gray-400">
                Making sustainable living easier for Syracuse residents, one resource at a time.
              </p>
            </div>
            <div>
              <h3 className="font-semibold mb-4">Quick Links</h3>
              <div className="space-y-2">
                {['Home', 'Map', 'About', 'Submit'].map(page => (
                  <button
                    key={page}
                    onClick={() => setCurrentPage(page.toLowerCase())}
                    className="block text-gray-400 hover:text-white transition"
                  >
                    {page}
                  </button>
                ))}
              </div>
            </div>
            <div>
              <h3 className="font-semibold mb-4">Contact</h3>
              <p className="text-gray-400">
                Questions or suggestions?<br />
                Email: info@greensyracuse.org
              </p>
            </div>
          </div>
          <div className="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
            <p>&copy; 2024 GreenSyracuse. Building a sustainable Syracuse together.</p>
          </div>
        </div>
      </footer>

      {/* AI Chat Button */}
      <button
        onClick={() => setChatOpen(!chatOpen)}
        className="fixed bottom-6 right-6 bg-green-600 text-white p-4 rounded-full shadow-lg hover:bg-green-700 transition z-50"
      >
        {chatOpen ? <X size={24} /> : <MessageCircle size={24} />}
      </button>

      {/* AI Chat Window */}
      {chatOpen && (
        <div className="fixed bottom-24 right-6 w-96 bg-white rounded-lg shadow-2xl z-50 flex flex-col max-h-[600px]">
          <div className="bg-green-600 text-white p-4 rounded-t-lg">
            <h3 className="font-semibold text-lg">AI Assistant</h3>
            <p className="text-sm text-green-100">Ask me anything about sustainable living!</p>
          </div>
          
          <div className="flex-1 overflow-y-auto p-4 space-y-4 min-h-[300px] max-h-[400px]">
            {chatMessages.map((msg, idx) => (
              <div
                key={idx}
                className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}
              >
                <div
                  className={`max-w-[80%] p-3 rounded-lg ${
                    msg.role === 'user'
                      ? 'bg-green-600 text-white'
                      : 'bg-gray-100 text-gray-800'
                  }`}
                >
                  {msg.content}
                </div>
              </div>
            ))}
            {isLoading && (
              <div className="flex justify-start">
                <div className="bg-gray-100 text-gray-800 p-3 rounded-lg">
                  Thinking...
                </div>
              </div>
            )}
          </div>

          <div className="p-4 border-t">
            <div className="flex gap-2">
              <input
                type="text"
                value={chatInput}
                onChange={(e) => setChatInput(e.target.value)}
                onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}
                placeholder="Ask about recycling, donations..."
                className="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                disabled={isLoading}
              />
              <button
                onClick={handleSendMessage}
                disabled={isLoading || !chatInput.trim()}
                className="bg-green-600 text-white p-2 rounded-lg hover:bg-green-700 transition disabled:opacity-50 disabled:cursor-not-allowed"
              >
                <Send size={20} />
              </button>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default GreenSyracuse;
